{# display all authors for a single article; expects Article object as `article` #}
{# BASE_URL is required for external links in File generated by Pisa/XHTML2PDF #}
{% load account_extras %}
<div id="article-authors" class="section">
{#  <h2>Author{{ article.descMetadata.content.authors|pluralize }}:</h2> #} {# don't bold the field name :-) #}
  {% for author in article.descMetadata.content.authors %}
  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
    {% with display_name=author.given_name|add:' '|add:author.family_name %}
      {% user_for_netid author.id as user %}
        {% comment %}
          spaceless won't kill the space before the author.affiliation
          comma, so cram this all on one line :/
        {% endcomment %}
        <p class="author my-authors">{% if user.userprofile.has_profile_page %}<a href="{{ BASE_URL|default:'' }}{% url 'accounts:profile' author.id %}" rel="author" itemprop="name">{{ display_name }}</a>{% else %}<span itemprop="name">{{ display_name }}</span>{% endif %}{% if author.affiliation %}, <span class="affiliation" itemprop="affiliation">{{ author.affiliation }}</span>{% endif %}</p>
        <div class="clear"></div>{# 352media (?!?) #}
    {% endwith %}
  </span>
  {% endfor %}
  {% if article.descMetadata.content.authors|length > 10 %}
  <a href="#" class="more" style="margin-top: 20px; float: right;">Show all authors</a>
  <a href="#" class="less" style="margin-top: 20px; float: right;">Show less authors</a>
  {% endif %}
</div>
